<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add New Client - YourGym</title>
    <link rel="stylesheet" href="/assets/css/styles.css" th:href="@{/assets/css/styles.css}">
</head>
<body>
<div th:replace="~{header :: header}">...</div>

<section id="register">
    <div class="container">
        <h2 class="site-h2">Add new Client</h2>
        <div class="messages">
            <ul>
                <li th:each="error : ${#fields.errors('newClient.*')}" class="error" th:text="${error}"></li>
            </ul>
        </div>
        <form th:action="@{/operator/add-new-client}" method="post" class="form" th:object="${newClient}">
            <label for="firstName">First Name:</label>
            <input type="text" th:field="*{firstName}" id="firstName" name="firstName">

            <label for="lastName">Last Name:</label>
            <input type="text" th:field="*{lastName}" id="lastName" name="lastName">

            <label for="phoneNum">Phone Number:</label>
            <div class="phone-wrapper">
                <span class="phone-prefix">+380</span>
                <input type="text" th:field="*{phoneNum}" id="phoneNum" name="phoneNum" maxlength="9">
            </div>

            <label for="idCard">Gym ID Card:</label>
            <input type="text" th:field="*{cardNumber}" id="idCard" name="idCard">

            <label for="trainer">Trainer:</label>
            <select th:field="*{trainerId}" id="trainer">
                <option value="0">none</option>
                <option th:each="trainer : ${trainers}"
                        th:value="${trainer.trainerId}"
                        th:text="${trainer.trainerFirstName + ' ' + trainer.trainerLastName}"></option>

            </select>


            <input type="hidden" id="isValid" value="true">
            <button type="submit">Create</button>
        </form>

    </div>
</section>

<div th:replace="~{footer :: footer}">...</div>

<script>
    document.querySelector('form').addEventListener('submit', function() {
        const phoneInput = document.getElementById('phoneNum');
        if (phoneInput.value && !phoneInput.value.startsWith('380')) {
            phoneInput.value = '380' + phoneInput.value;
        }
    });
</script>

</body>
</html>
